<link href="{$wa_theme_url}swipebox/css/swipebox.min.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="{$wa_theme_url}swipebox/js/jquery.swipebox.js"></script>

<article itemscope itemtype="http://schema.org/Product">
    
    <h1 itemprop="name">
        {$product.name|escape}
        {if !empty($product.rating) && $product.rating > 0}
            <span class="rating nowrap" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating" title="{sprintf('[`Average user rating: %s / 5`]', $product.rating)}">
                {$wa->shop->ratingHtml($product.rating, 16)}
                <span itemprop="ratingValue" style="display: none;">{$product.rating}</span>
                <span itemprop="reviewCount" style="display: none;">{$reviews_total_count}</span>
            </span>
        {/if}
    </h1>

    <!-- product internal nav -->
    
    <!-- product info & gallery -->
    <div class="product-info" id="overview">

        {if $product.images}
        
            <section class="product-gallery">
            
                <!-- thumbs -->
				<div class="more-images" id="product-gallery">
					{foreach $product.images as $image}
						<div class="image{if $image.id == $product.image_id} selected{/if} thumb-image">
							<a id="product-image-{$image.id}" href="{$wa->shop->productImgUrl(['id'=> $product.id, 'image_id' => $image.id, 'ext' => $image.ext], '970')}" class="swipebox">
								{$wa->shop->productImgHtml(['id'=> $product.id, 'image_id' => $image.id, 'ext' => $image.ext, 'image_desc' => $image.description], '100', ['alt' => $image.description|escape])}
							</a>
						</div>
					{/foreach}
				</div>

                <!-- main image -->
                <div class="image" id="product-core-image">
                    <div class="corner top right">
                        {$wa->shop->badgeHtml($product.badge)}
                    </div>
                    <a href="{$wa->shop->productImgUrl($product, '970')}">
                        {$wa->shop->productImgHtml($product, '750', [ 'itemprop' => 'image', 'id' => 'product-image', 'alt' => $product.name|escape ])}
                    </a>
                    <div id="switching-image" style="display: none;"></div>
                </div>
                
                
            </section>
    
        {/if}

		{$pr=$wa->shop->product($product.id)}
		<div class="product-data">
			{if $product.sku_type}
				{$sku = reset($product.skus)}
			{else}
				{$sku = $product.skus[$product.sku_id]}
			{/if}
			<div class="sku"><b>Артикул: </b>{if $sku.sku}{$sku.sku|escape}{/if}</div>
			<div class="price"><b>Цена: </b>{$sku.price} руб.</div>
			<form id="cart-form{if $wa->get('cart')}-dialog{/if}" action="{$wa->getUrl('/frontendCart/add')}" method="post">
				<input type="hidden" name="product_id" value="{$product.id}">
				{if $product.sku_type}
					<!-- SELECTABLE FEATURES selling mode -->
					{$default_sku_features = $product.sku_features}
					<div class="options">
						{foreach $features_selectable as $f}
							<div class="option">
								<div class="param-name">{$f.name}:</div>
								{if $f.code == "razmer" or $f.code == "size"}
									<div class="size-vars" data-target-input="features[{$f.id}]">
										{foreach $f.values as $v_id => $v}
											{*{if $v_id == ifset($default_sku_features[$f.id])}size-var-active{/if}*}
											<div class="size-var" data-value="{$v_id}">{$v}</div>
										{/foreach}
									</div>
									<div class="form-fill-hint">Выберите размер</div>
									<input id="sizeparam" type="hidden" name="features[{$f.id}]" value="">
								{else}
									<select data-feature-id="{$f.id}" class="sku-feature" name="features[{$f.id}]">
										{foreach $f.values as $v_id => $v}
											<option value="{$v_id}" {if $v_id == ifset($default_sku_features[$f.id])}selected{/if}>{$v}</option>
										{/foreach}
									</select>
								{/if}
							</div>
							<div class="clearfix"></div>
						{/foreach}
					</div>
				{else}
					<input type="hidden" value="{$product.sku_id}" name="sku_id"></input>
				{/if} {* Вообще там дальше тоже есть варианты, но пока это не нужно *}
				<div class="options">
					<div class="param-name">Количество:</div> <input class="param-value" type="text" value="1" name="quantity" size="2" /><br />
				</div>
				<input id="add-to-cart" type="submit" value="В корзину" />
			</form>
		</div>
		<div class="description" itemprop="description"><b>Описание: </b>{if $product.description}{$product.description}{/if}</div>

        <!-- plugin hook: 'frontend_product.block' -->
        {* @event frontend_product.%plugin_id%.block *}
        {foreach $frontend_product as $_}{$_.block}{/foreach}

        {if $product.description}
            <!--<section class="description" id="product-description" itemprop="description">{$product.description}</section>-->
        {/if}

        <!-- product features -->

		<!-- purchase -->

        <!-- categories -->

        <!-- tags -->
 
        <!-- product reviews -->
    </div>

</article>


<!-- RELATED PRODUCTS -->
{$upselling = $product->upSelling(12)}
{$crossselling = $product->crossSelling(12)}
